<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>佛系阿宅的小站</title><link>https://fxazfung.github.io/</link><description>Recent content on 佛系阿宅的小站</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Thu, 21 Aug 2025 15:02:19 +0800</lastBuildDate><atom:link href="https://fxazfung.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>求职打招呼</title><link>https://fxazfung.github.io/post/%E6%B1%82%E8%81%8C/%E6%B1%82%E8%81%8C%E6%89%93%E6%8B%9B%E5%91%BC/</link><pubDate>Thu, 21 Aug 2025 15:02:19 +0800</pubDate><guid>https://fxazfung.github.io/post/%E6%B1%82%E8%81%8C/%E6%B1%82%E8%81%8C%E6%89%93%E6%8B%9B%E5%91%BC/</guid><description>&lt;p>您好，我对您发布的岗位非常感兴趣。本人具备扎实的计算机基础，熟悉 Go 语言及相关技术栈，并有过实习与项目经验。可长期实习，并能在一周内到岗。如有需要，我可以将简历发送给您，期待您的回复。&lt;/p></description></item><item><title>关于RKE2 1.27.10+rke2r1修改证书时长的使用</title><link>https://fxazfung.github.io/post/rke2%E8%AF%81%E4%B9%A6%E5%BB%B6%E9%95%BF/%E5%85%B3%E4%BA%8Erke2-1.27.10+rke2r1%E4%BF%AE%E6%94%B9%E8%AF%81%E4%B9%A6%E6%97%B6%E9%95%BF%E7%9A%84%E4%BD%BF%E7%94%A8/</link><pubDate>Wed, 20 Aug 2025 13:57:10 +0800</pubDate><guid>https://fxazfung.github.io/post/rke2%E8%AF%81%E4%B9%A6%E5%BB%B6%E9%95%BF/%E5%85%B3%E4%BA%8Erke2-1.27.10+rke2r1%E4%BF%AE%E6%94%B9%E8%AF%81%E4%B9%A6%E6%97%B6%E9%95%BF%E7%9A%84%E4%BD%BF%E7%94%A8/</guid><description>&lt;h2 id="关于rke2-12710rke2r1修改证书时长的使用">
&lt;a class="header-anchor" href="#%e5%85%b3%e4%ba%8erke2-12710rke2r1%e4%bf%ae%e6%94%b9%e8%af%81%e4%b9%a6%e6%97%b6%e9%95%bf%e7%9a%84%e4%bd%bf%e7%94%a8">&lt;/a>
关于RKE2 1.27.10+rke2r1修改证书时长的使用
&lt;/h2>&lt;h3 id="基于rke2-v12710rke2r1进行代码修改并重新编译项目修改了以下的功能">
&lt;a class="header-anchor" href="#%e5%9f%ba%e4%ba%8erke2-v12710rke2r1%e8%bf%9b%e8%a1%8c%e4%bb%a3%e7%a0%81%e4%bf%ae%e6%94%b9%e5%b9%b6%e9%87%8d%e6%96%b0%e7%bc%96%e8%af%91%e9%a1%b9%e7%9b%ae%e4%bf%ae%e6%94%b9%e4%ba%86%e4%bb%a5%e4%b8%8b%e7%9a%84%e5%8a%9f%e8%83%bd">&lt;/a>
基于RKE2 v1.27.10+rke2r1进行代码修改并重新编译项目修改了以下的功能
&lt;/h3>&lt;ul>
&lt;li>可以通过修改&lt;code>/etc/default/rke2-server&lt;/code> 相关配置修改证书自定义时长 &lt;strong>客户端|CA证书&lt;/strong>&lt;/li>
&lt;li>修复在rke2 v1.27.10中的使用 &lt;code>rke2 certificate rotate&lt;/code> 出现的部分客户端证书没有更新的问题&lt;/li>
&lt;/ul>
&lt;h3 id="具体使用方式">
&lt;a class="header-anchor" href="#%e5%85%b7%e4%bd%93%e4%bd%bf%e7%94%a8%e6%96%b9%e5%bc%8f">&lt;/a>
具体使用方式
&lt;/h3>&lt;ol>
&lt;li>在已有的搭建了rke2 v1.27.10+rke2r1中的集群中 &lt;strong>先关闭集群&lt;/strong> 然后将对应架构的二进制文件&lt;strong>替换&lt;/strong>原有的二进制文件 同时重新加载服务&lt;/li>
&lt;li>启动替换了二进制文件之后rke2集群 并且要&lt;strong>等侯原有集群节点进入Ready状态&lt;/strong>（不然会出现一台机器上有多个相同ip的rke2节点）&lt;/li>
&lt;li>定义&lt;code>/etc/default/rke2-server&lt;/code>配置文件，内容介绍如下```&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-properties" data-lang="properties">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">CATTLE_NEW_SIGNED_CA_EXPIRATION_YEARS&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">100 # 自定义客户端证书时长（单位年）&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">CATTLE_NEW_SIGNED_CERT_EXPIRATION_DAYS&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">36500 # 自定义CA证书时长 （单位天）&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>使用命令&lt;code>rke2 certificate rotate&lt;/code>手动更新客户端证书&lt;/li>
&lt;li>使用命令&lt;code>for i in &lt;/code>ls /var/lib/rancher/rke2/server/tls/*.crt&lt;code>; do echo $i; openssl x509 -enddate -noout -in $i; done&lt;/code> 观察发现证书有效期已经修改至配置的时长&lt;/li>
&lt;li>确认集群正常运行&lt;/li>
&lt;/ol>
&lt;h3 id="目前已知的问题">
&lt;a class="header-anchor" href="#%e7%9b%ae%e5%89%8d%e5%b7%b2%e7%9f%a5%e7%9a%84%e9%97%ae%e9%a2%98">&lt;/a>
目前已知的问题
&lt;/h3>&lt;ul>
&lt;li>当CA证书到期时应该怎么处理，并且暂时不能在不影响集群的情况下替换CA证书&lt;/li>
&lt;li>是否在生产环境中自行编译的二进制会有其他不确定的bug，例如镜像问题，部署项目的问题&lt;/li>
&lt;li>其他未知问题&lt;/li>
&lt;/ul>
&lt;h3 id="代码仓库">
&lt;a class="header-anchor" href="#%e4%bb%a3%e7%a0%81%e4%bb%93%e5%ba%93">&lt;/a>
代码仓库
&lt;/h3>&lt;ul>
&lt;li>&lt;a href="https://github.com/FXAZfung/k3s">FXAZfung/k3s: Lightweight Kubernetes&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/FXAZfung/my-dynamiclistener">FXAZfung/my-dynamiclistener&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://github.com/FXAZfung/my-rke2">FXAZfung/my-rke2&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="二进制下载地址">
&lt;a class="header-anchor" href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e4%b8%8b%e8%bd%bd%e5%9c%b0%e5%9d%80">&lt;/a>
二进制下载地址
&lt;/h3>&lt;ul>
&lt;li>&lt;a href="https://github.com/FXAZfung/my-rke2/releases">Releases · FXAZfung/my-rke2&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>关于</title><link>https://fxazfung.github.io/about/</link><pubDate>Mon, 11 Aug 2025 15:15:21 +0800</pubDate><guid>https://fxazfung.github.io/about/</guid><description>&lt;p>&lt;strong>只是一个用来记录的博客&lt;/strong>&lt;/p>
&lt;p>&lt;strong>是一名双非大学 软件工程在读学生 目前在准备考研&lt;/strong>&lt;/p>
&lt;p>&lt;strong>喜欢的东西&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>音乐——包括但不限于吉他 钢琴 小提琴 交响乐 galgame配乐等等 会弹一点吉他 希望可以购买钢琴和小提琴玩（）&lt;/li>
&lt;li>galgame——应该是key厨（被影响最深的是Clannad）同时还玩过枕社 柚子社 中二社等等 还有评分高的作品（是一名旮旯萌新）&lt;/li>
&lt;li>计算机技术——目前是在做Go语言开发包括运维方面的东西，也会写一点前端，总体上只是一名普通萌新大学生，从大学才开始正式接触这些东西&lt;/li>
&lt;li>体育运动——业余爱好喜欢打羽毛球和乒乓球 想玩骑行（）&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>⬆和我聊这些东西我就不困了（）&lt;/strong>&lt;/p></description></item><item><title>RKE2修改CA证书有效时长</title><link>https://fxazfung.github.io/post/rke2%E8%AF%81%E4%B9%A6%E5%BB%B6%E9%95%BF/rke2%E4%BF%AE%E6%94%B9ca%E8%AF%81%E4%B9%A6%E6%9C%89%E6%95%88%E6%97%B6%E9%95%BF/</link><pubDate>Sat, 02 Aug 2025 15:02:19 +0800</pubDate><guid>https://fxazfung.github.io/post/rke2%E8%AF%81%E4%B9%A6%E5%BB%B6%E9%95%BF/rke2%E4%BF%AE%E6%94%B9ca%E8%AF%81%E4%B9%A6%E6%9C%89%E6%95%88%E6%97%B6%E9%95%BF/</guid><description>&lt;h2 id="-rke2-自定义证书有效期的编译与部署流程">
&lt;a class="header-anchor" href="#-rke2-%e8%87%aa%e5%ae%9a%e4%b9%89%e8%af%81%e4%b9%a6%e6%9c%89%e6%95%88%e6%9c%9f%e7%9a%84%e7%bc%96%e8%af%91%e4%b8%8e%e9%83%a8%e7%bd%b2%e6%b5%81%e7%a8%8b">&lt;/a>
✅ RKE2 自定义证书有效期的编译与部署流程
&lt;/h2>&lt;h3 id="-背景说明">
&lt;a class="header-anchor" href="#-%e8%83%8c%e6%99%af%e8%af%b4%e6%98%8e">&lt;/a>
🧠 背景说明
&lt;/h3>&lt;p>RKE2 的证书生成逻辑继承自 K3s，而 K3s 又依赖于 &lt;a href="https://github.com/rancher/dynamiclistener">&lt;code>github.com/rancher/dynamiclistener&lt;/code>&lt;/a> 库来生成 TLS 证书。因此，我们可以通过修改该库来自定义 CA 或客户端证书的有效期。&lt;/p></description></item><item><title>RKE2修改客户端证书有效时长</title><link>https://fxazfung.github.io/post/rke2%E8%AF%81%E4%B9%A6%E5%BB%B6%E9%95%BF/rke2%E4%BF%AE%E6%94%B9%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%81%E4%B9%A6%E6%9C%89%E6%95%88%E6%97%B6%E9%95%BF/</link><pubDate>Fri, 01 Aug 2025 15:02:19 +0800</pubDate><guid>https://fxazfung.github.io/post/rke2%E8%AF%81%E4%B9%A6%E5%BB%B6%E9%95%BF/rke2%E4%BF%AE%E6%94%B9%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%81%E4%B9%A6%E6%9C%89%E6%95%88%E6%97%B6%E9%95%BF/</guid><description>&lt;p>通过查阅 &lt;a href="https://github.com/rancher/rke2/pull/4324">https://github.com/rancher/rke2/pull/4324&lt;/a> 可知，RKE2 官方已支持通过配置服务器端环境变量来自定义客户端证书的有效期。具体方法如下：&lt;/p>
&lt;p>在 &lt;code>/etc/default/rke2-server&lt;/code> 文件中添加以下参数：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>CATTLE_NEW_SIGNED_CERT_EXPIRATION_DAYS&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#ae81ff">36500&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>该参数设置客户端证书的有效期为 36500 天（约 100 年）。&lt;/p></description></item><item><title>友情链接</title><link>https://fxazfung.github.io/friend/</link><pubDate>Thu, 09 Jun 2022 20:12:52 +0800</pubDate><guid>https://fxazfung.github.io/friend/</guid><description>&lt;h2 id="本站信息">
&lt;a class="header-anchor" href="#%e6%9c%ac%e7%ab%99%e4%bf%a1%e6%81%af">&lt;/a>
本站信息
&lt;/h2>&lt;ul>
&lt;li>站名： 佛系阿宅的小站&lt;/li>
&lt;li>站长： 佛系阿宅&lt;/li>
&lt;/ul>
&lt;h2 id="申请方法">
&lt;a class="header-anchor" href="#%e7%94%b3%e8%af%b7%e6%96%b9%e6%b3%95">&lt;/a>
申请方法
&lt;/h2>&lt;ul>
&lt;li>添加本站后，在本页留言，格式如下&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yml" data-lang="yml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">```yml&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#75715e">#您的名字&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">url&lt;/span>: &lt;span style="color:#75715e">#您的网址&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">desc&lt;/span>: &lt;span style="color:#75715e">#简短描述&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#75715e">#一张图片&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">```&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="小伙伴们">
&lt;a class="header-anchor" href="#%e5%b0%8f%e4%bc%99%e4%bc%b4%e4%bb%ac">&lt;/a>
小伙伴们
&lt;/h2>


&lt;div class="friend-wrap" data-aos="zoom-in">
 
 &lt;div class="friend-item-wrap">
 &lt;a href="https://asr7.top" rel="noopener external nofollow noreferrer" target="_blank">&lt;/a>
 &lt;div class="friend-icon-wrap">
 &lt;div class="friend-icon">
 &lt;img
 data-src="https://asr7.top/images/header.jpg"
 data-sizes="auto"
 alt="asR7"
 class="lazyload"
 />
 &lt;/div>
 &lt;/div>
 &lt;div class="friend-info-wrap">
 &lt;div class="friend-name">
 asR7
 &lt;/div>
 &lt;div class="friend-desc">
 asR7的破站
 &lt;/div>
 &lt;/div>
 &lt;/div>
 
&lt;/div></description></item></channel></rss>